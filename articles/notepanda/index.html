<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Notepanda 开发小结 | ChungZH's Blog</title><meta property="og:site_name" content="ChungZH's Blog"><meta property="og:title" content="Notepanda 开发小结 | ChungZH's Blog"><meta itemprop=name content="Notepanda 开发小结 | ChungZH's Blog"><meta name=twitter:title content="Notepanda 开发小结 | ChungZH's Blog"><meta name=application-name content="Notepanda 开发小结 | ChungZH's Blog"><link rel="shortcut icon" href=/BlogFavicon16.png><meta name=twitter:card content="summary"><meta name=description content="Welcome to my blog!"><meta name=twitter:description content="Welcome to my blog!"><meta itemprop=description content="Welcome to my blog!"><meta property="og:description" content="Welcome to my blog!"><link rel=stylesheet href="https://blog.chungzh.cn/sass/main.min.2f68c918ed7ceda422e5625841a25f023990d420145b14c62bf037e20ccdc391.css" integrity="sha256-L2jJGO187aQi5WJYQaJfAjmQ1CAUWxTGK/A34gzNw5E="></head><body class="bg-white dark:bg-slate-900 text-slate-500 dark:text-slate-400"><header class="sticky top-0 z-40"><div class="w-full backdrop-blur bg-white/80 dark:bg-slate-900/75 lg:border-b lg:border-slate-900/10 dark:border-slate-50/[0.06]"><div class="py-4 border-b border-slate-900/10 lg:px-8 lg:border-0 dark:border-slate-300/10 mx-4 lg:mx-0"><div class="px-20 relative flex flex-wrap justify-between"><div class="relative flex items-center"><a href=/><div class="flex gap-3 items-center text-xl font-bold text-slate-800 dark:text-slate-200"><img class="w-auto h-8" src=/BlogFavicon16.png title=logo>
<span class="hover:text-sky-500 dark:hover:text-sky-400">ChungZH's Blog</span></div></a></div><div class="relative flex items-center"><div class="flex gap-5 items-center leading-6 font-semibold text-slate-700 dark:text-slate-200"><a class="hover:text-sky-500 dark:hover:text-sky-400" href=/about/>关于</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/friends/>友链</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/archives/>存档</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/tags/>标签</a></div></div></div></div></div></header><div class="max-w-3xl mx-auto pb-28"><main class="max-w-[52rem] mx-auto py-10"><div class=container><article><header class=article-header><div class=thumb><div><div class=post-tags><a class=tag href=/tags/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/>#文本编辑器</a>
<a class=tag href=/tags/qt/>#Qt</a>
<a class=tag href=/tags/c++/>#C++</a>
<a class=tag href=/tags/%E7%BC%96%E7%A8%8B/>#编程</a></div><h1 class=post-title>Notepanda 开发小结</h1><div class=post-meta>By ChungZH<div class="font-bold text-sky-500 dark:text-sky-400">·</div><time>May 16, 2020</time><div class="font-bold text-sky-500 dark:text-sky-400">·</div>1 minutes</div></div></div></header></article><aside class=toc><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#feature>Feature</a></li><li><a href=#screenshots>Screenshots</a></li><li><a href=#实现>实现</a><ul><li><a href=#布局>布局</a></li><li><a href=#编辑控件>编辑控件</a></li><li><a href=#语法高亮>语法高亮</a></li><li><a href=#ci>CI</a></li></ul></li><li><a href=#最后>最后</a></li></ul></nav></aside><div class=article-post><h2 id=前言><a href=#%e5%89%8d%e8%a8%80 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>前言</h2><p>最近开始学习 Qt，然后就挖坑了一个小玩具 Notepanda，顺便看看能不能替代诸如 notepad、gedit 之类的软件。顺便锻炼一下自己。</p><p><a href=https://github.com/ChungZH/notepanda>GitHub repo</a></p><h2 id=feature><a href=#feature class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Feature</h2><ol><li>基本的文本编辑操作（没想到吧这也是 feature 了哈哈哈哈哈哈）</li><li>行号显示</li><li>语法高亮</li><li>从命令行启动。（如 <code>notepanda</code> 或者 <code>notepanda CMakeLists.txt</code>）</li></ol><p>除此之外还实现了自定义字体、字号、Qt 主题和 Status Bar 等一些小功能。</p><p>以后的目标是实现多标签页，并对 Markdown 做一点优化（比如预览），<del>如果有可能还会加进去一个 terminal</del>。计划在 <a href=https://github.com/ChungZH/notepanda/projects/>GitHub Projects</a>。</p><p>目前还是很弱的一个东西，不过等查找、替换等 feature 实现之后，基本上可以替代 Windows 的 notepad 了。</p><h2 id=screenshots><a href=#screenshots class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Screenshots</h2><p><img src=https://czh-img.oss-cn-shenzhen.aliyuncs.com/blog/code/notepanda/notepanda-sc1.png alt><img src=https://czh-img.oss-cn-shenzhen.aliyuncs.com/blog/code/notepanda/notepanda-sc2.png alt><img src=https://czh-img.oss-cn-shenzhen.aliyuncs.com/blog/code/notepanda/notepanda-sc3.png alt><img src=https://czh-img.oss-cn-shenzhen.aliyuncs.com/blog/code/notepanda/notepanda-sc4.png alt></p><h2 id=实现><a href=#%e5%ae%9e%e7%8e%b0 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>实现</h2><p>这部分大概讲讲思路吧。</p><h3 id=布局><a href=#%e5%b8%83%e5%b1%80 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>布局</h3><p><img src=https://czh-img.oss-cn-shenzhen.aliyuncs.com/blog/code/notepanda/notepanda.png alt=layout></p><h3 id=编辑控件><a href=#%e7%bc%96%e8%be%91%e6%8e%a7%e4%bb%b6 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>编辑控件</h3><p>使用了 Qt 提供的 QPlainTextEdit 类，适合纯文本编辑。刚开始还用的是 QTextEdit，想想自己真是傻了，又不是要编辑富文本哈哈哈。</p><p>不过 QPlainTextEdit 似乎有点点慢，我也没能力造轮子，于是就将就着用吧。</p><h3 id=语法高亮><a href=#%e8%af%ad%e6%b3%95%e9%ab%98%e4%ba%ae class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>语法高亮</h3><p>刚开始想实现的时候看见了 Qt 官方的 <a href="https://links.jianshu.com/go?to=http%3A%2F%2Fdoc.qt.io%2Fqt-5%2Fqtwidgets-richtext-syntaxhighlighter-example.html">Syntax Highlighter Example</a>，很棒对吧。但是我可不想花精力去写一堆语言的规则呢！</p><p>然后就找到了 KDE Framework 里的 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2FKDE%2Fsyntax-highlighting">KSyntaxHighlighting</a>。KDE Framework 是真的烦人，刚开始怎么也 build 不出来。等到了 GitHub Actions 上，整整用了四天时间才搞定，还是在某 Packman 的帮助下才完成的。。。当时看到绿绿的 Actions，我差点没开心得疯掉。。</p><p>这个 KSyntaxHighlighting，deepin-editor 和 Qt Creator 都在使用。好在他自己也提供了一些 example，看上去很简单。依赖也很小，只有 Extra CMake Modules，不过看上去和高亮的功能没啥关系，也许是 KF 必备依赖吧。它自带了两百多种语言的高亮规则，省了我很多事情，有 Dark / Light 主题，不服还可以自己写。很满意。</p><h3 id=ci><a href=#ci class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>CI</h3><p>我可不想每次更新都自己打一次包，没那个闲心，手上能用的系统也不够 :) 穷孩子怎么买得起 Mac。所以只能用 CI 啦。</p><p>现在 CI 主要帮我解决了：</p><ol><li>Windows 安装程序</li><li>Windows 上的 7z & MacOS 上的 dmg & Linux 的 AppImage</li><li>Release 时自动上传以上所有文件</li></ol><p>CI 平台当然是选择了 GitHub Actions 啦！现在这个项目所有环节都在 GitHub 上能找到，AUR 除外 :(</p><p>Notepanda 的 CI 全都是抄 <a href=https://github.com/qv2ray/qv2ray>Qv2ray</a> 上的，可真是帮了我很多忙。</p><h2 id=最后><a href=#%e6%9c%80%e5%90%8e class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>最后</h2><p>感谢 Qv2ray 的 Super Packman: ymshenyu，感谢死鬼 gcc，感谢鸭鸭，感谢 Qv2ray User Group 里面的每一个人。如果没有他们，我的 Qt 旅程不会这么顺利。</p><p>顺便，Qv2ray 是一个很好用的 v2ray 跨平台客户端，欢迎尝试！</p><p>谢谢阅读 🙇‍♂️</p><p>最后，放上我画的一只小熊猫：</p><div align=center><img src=https://czh-img.oss-cn-shenzhen.aliyuncs.com/blog/code/notepanda/logo.png width=300></div><donate><vssue title=notepanda></div><div class=paginav><a rel=prev href=/articles/cpp-get-time/ title="Previous post (older)"><span>Prev</span><div class=paginav-title>Windows 中 C++ 测量时间的 N 种方法</div></a><a class=text-right rel=next href=/articles/csp-j-2020/ title="Next post (newer)"><span>Next</span><div class=paginav-title>CSP-J 2020 游记</div></a></div></div><div class=container><script src=https://giscus.app/client.js data-repo=ChungZH/ChungZH.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNzcxMjMzNjI=" data-category=Comments data-category-id=DIC_kwDOCo6wIs4B_i5g data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-theme=light crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector(".giscus iframe");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}const colorSchemeQueryList=window.matchMedia("(prefers-color-scheme: dark)"),setColorScheme=e=>{setGiscusTheme(e.matches?"dark_dimmed":"light")};setColorScheme(colorSchemeQueryList),colorSchemeQueryList.addEventListener("change",setColorScheme)</script></div></main><footer class="text-sm leading-6 mt-10"><div class="pt-10 pb-28 border-t border-slate-200 sm:flex justify-between text-slate-500 dark:border-slate-200/5"><div class="mb-6 sm:mb-0 sm:flex"><p>Made with ❤</p><p class="sm:ml-4 sm:pl-4 sm:border-l sm:border-slate-200 dark:sm:border-slate-200/5">By
<a class="hover:text-slate-900 dark:hover:text-slate-400" href=https://github.com/ChungZH>ChungZH</a></p><p class="sm:ml-4 sm:pl-4 sm:border-l sm:border-slate-200 dark:sm:border-slate-200/5">Theme hugo-klay</p></div></div></footer></div></body></html>