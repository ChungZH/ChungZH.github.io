<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>线段树笔记 | ChungZH's Blog</title><meta property="og:site_name" content="ChungZH's Blog"><meta property="og:title" content="线段树笔记 | ChungZH's Blog"><meta itemprop=name content="线段树笔记 | ChungZH's Blog"><meta name=twitter:title content="线段树笔记 | ChungZH's Blog"><meta name=application-name content="线段树笔记 | ChungZH's Blog"><link rel="shortcut icon" href=/BlogFavicon16.png><meta name=twitter:card content="summary"><meta name=description content="Welcome to my blog!"><meta name=twitter:description content="Welcome to my blog!"><meta itemprop=description content="Welcome to my blog!"><meta property="og:description" content="Welcome to my blog!"><link rel=stylesheet href="https://blog.chungzh.cn/sass/main.min.7282f6bbf341e3d53b04c9caa46bee016e558c91f2f9e48deaa3383817abd770.css" integrity="sha256-coL2u/NB49U7BMnKpGvuAW5VjJHy+eSN6qM4OBer13A="></head><body class="bg-white dark:bg-slate-900 text-slate-500 dark:text-slate-400"><header class="sticky top-0 z-40"><div class="w-full backdrop-blur bg-white/80 dark:bg-slate-900/75 lg:border-b lg:border-slate-900/10 dark:border-slate-50/[0.06]"><div class="py-4 border-b border-slate-900/10 lg:px-8 lg:border-0 dark:border-slate-300/10 mx-4 lg:mx-0"><div class="px-20 relative flex flex-wrap justify-between"><div class="relative flex items-center"><a href=/><div class="flex gap-3 items-center text-xl font-bold text-slate-800 dark:text-slate-200"><img class="w-auto h-8" src=/BlogFavicon16.png title=logo>
<span class="hover:text-sky-500 dark:hover:text-sky-400">ChungZH's Blog</span></div></a></div><div class="relative flex items-center"><div class="flex gap-5 items-center leading-6 font-semibold text-slate-700 dark:text-slate-200"><a class="hover:text-sky-500 dark:hover:text-sky-400" href=/about/>关于</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/categories/>分类</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/friends/>友链</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/archives/>存档</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/tags/>标签</a></div></div></div></div></div></header><div class="max-w-3xl mx-auto pb-28"><main class="max-w-[52rem] mx-auto py-10"><div class=container><article><header class=article-header><div class=thumb><div><div class=post-tags><a class=tag href=/tags/oi/>#OI</a>
<a class=tag href=/tags/%E7%AE%97%E6%B3%95/>#算法</a>
<a class=tag href=/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/>#数据结构</a>
<a class=tag href=/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/>#线段树</a></div><h1 class=post-title>线段树笔记</h1><div class=post-meta>By ChungZH<div class="font-bold text-sky-500 dark:text-sky-400">·</div><time>August 04, 2021</time><div class="font-bold text-sky-500 dark:text-sky-400">·</div>3 minutes</div></div></div></header></article><aside class=toc><nav id=TableOfContents><ul><li><a href=#建树>建树</a></li><li><a href=#区间查询>区间查询</a></li><li><a href=#区间修改>区间修改</a></li><li><a href=#小结>小结</a></li></ul></nav></aside><div class=article-post><p>线段树是一种<del>高端</del>的数据结构，可以用来在区间上进行信息统计。它能够在 $O(logN)$ 的时间复杂度内实现单点/区间修改、区间找最大值/最小值/总和/&mldr;，适用于大规模的区间统计。</p><p>如下图就是一棵线段树。在结点中，你可以存对应区间的最大值，最小值，总和等等。</p><p><img src="https://github.com/ChungZH/img/blob/main/segtree/segtree-1.png?raw=true" alt=线段树></p><p>对于每一个结点 $i$，它的两个子结点分别是 $2i$ 和 $2i+1$。因此，在开树的数组时，最好要开到 $4N$ 的大小。</p><blockquote><p>关于 $4N$，详见 <a href=https://oi-wiki.org/ds/seg/>OI-Wiki</a>。</p></blockquote><h2 id=建树><a href=#%e5%bb%ba%e6%a0%91 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>建树</h2><p>下面是一个求区间和的线段树的建树代码。</p><p>通过 DFS 建树，到叶结点，然后一路回溯求出和。</p><div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>build_tree</span><span style=color:#111>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>cur</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>left</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>right</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// cur 为当前树的根，[left, right] 是当前树对应的区间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>left</span> <span style=color:#f92672>==</span> <span style=color:#111>right</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 到叶子节点了，区间长度为 1，总和就是它本身
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>]</span> <span style=color:#f92672>=</span> <span style=color:#111>a</span><span style=color:#111>[</span><span style=color:#111>left</span><span style=color:#111>];</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>return</span> <span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#111>}</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>int</span> <span style=color:#111>leftSon</span> <span style=color:#f92672>=</span> <span style=color:#111>cur</span><span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#111>,</span> <span style=color:#111>rightSon</span> <span style=color:#f92672>=</span> <span style=color:#111>leftSon</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>int</span> <span style=color:#111>mid</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#111>left</span><span style=color:#f92672>+</span><span style=color:#111>right</span><span style=color:#111>)</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#111>build_tree</span><span style=color:#111>(</span><span style=color:#111>leftSon</span><span style=color:#111>,</span> <span style=color:#111>left</span><span style=color:#111>,</span> <span style=color:#111>mid</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>	<span style=color:#111>build_tree</span><span style=color:#111>(</span><span style=color:#111>rightSon</span><span style=color:#111>,</span> <span style=color:#111>mid</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>right</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>	<span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>]</span> <span style=color:#f92672>=</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>leftSon</span><span style=color:#111>]</span><span style=color:#f92672>+</span><span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>rightSon</span><span style=color:#111>];</span> <span style=color:#75715e>// 求和
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#111>}</span>
</span></span></code></pre></td></tr></table></div></div><p>这里求 <code>leftSon</code>，<code>rightSon</code>，<code>mid</code> 的模式在线段树的所有操作中都会用到。</p><h2 id=区间查询><a href=#%e5%8c%ba%e9%97%b4%e6%9f%a5%e8%af%a2 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>区间查询</h2><p><img src="https://github.com/ChungZH/img/blob/main/segtree/segtree-2.png?raw=true" alt=线段树查询></p><p>对于一个不<em>恰好</em>的区间，我们可以不断地把它拆分成两个恰好的区间再进行合并。</p><p>如图所示，拆分过程如下：</p><ol><li>[3, 7]</li><li>[3, 4], [5, 7]</li><li>[3, 4], [5, 6], [7, 7]</li></ol><p>在实际 DFS 过程中，我们可以分为三种情况：</p><ol><li>当前结点对应区间和要查询的区间<strong>完全无关</strong>，直接退出</li><li>当前结点对应区间<strong>完全</strong>处于要查询的区间范围，返回当前结点的值</li><li>两个区间部分相交，继续拆分为 1 或 2 情况</li></ol><div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#00a8c8>long</span> <span style=color:#00a8c8>long</span> <span style=color:#75af00>query</span><span style=color:#111>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>cur</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>l</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>r</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// cur 为当前树的根，[l, r] 是当前树对应的区间，[x, y] 是要查询的区间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>l</span> <span style=color:#f92672>||</span> <span style=color:#111>r</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>x</span><span style=color:#111>)</span> <span style=color:#00a8c8>return</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>  <span style=color:#75715e>// 1. 相离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>x</span> <span style=color:#f92672>&lt;=</span> <span style=color:#111>l</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#111>r</span> <span style=color:#f92672>&lt;=</span> <span style=color:#111>y</span><span style=color:#111>)</span> <span style=color:#00a8c8>return</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>];</span>  <span style=color:#75715e>// 2. 完全包含
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 3. 相交
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#00a8c8>int</span> <span style=color:#111>leftSon</span> <span style=color:#f92672>=</span> <span style=color:#111>cur</span><span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#111>,</span> <span style=color:#111>rightSon</span> <span style=color:#f92672>=</span> <span style=color:#111>leftSon</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>int</span> <span style=color:#111>mid</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#111>l</span><span style=color:#f92672>+</span><span style=color:#111>r</span><span style=color:#111>)</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>return</span> <span style=color:#111>query</span><span style=color:#111>(</span><span style=color:#111>leftSon</span><span style=color:#111>,</span> <span style=color:#111>l</span><span style=color:#111>,</span> <span style=color:#111>mid</span><span style=color:#111>,</span> <span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#111>)</span> <span style=color:#f92672>+</span> <span style=color:#111>query</span><span style=color:#111>(</span><span style=color:#111>rightSon</span><span style=color:#111>,</span> <span style=color:#111>mid</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>r</span><span style=color:#111>,</span> <span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#111>);</span> <span style=color:#75715e>// 求和
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#111>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=区间修改><a href=#%e5%8c%ba%e9%97%b4%e4%bf%ae%e6%94%b9 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>区间修改</h2><p>单点修改并没有什么意思，就不讲了。</p><p>区间修改当然不是重复做单点修改，否则使用线段树就很没有必要了。为了避免走到底下去，我们要使用一个<strong>懒惰标记</strong>（lazy tag）。当一个大区间内所有的小单位都要进行同样的修改操作时，只需要在大区间做一次标记就可以了。到了必须要走下去（即查询更小的区间或修改更小的区间）的时候，再把懒惰标记<strong>下放</strong>。</p><p>下面以一个区间增加一个值并进行区间查询为例。</p><p>首先定义一个结构体，其中 <code>add</code> 就是记录这个区间需要增加的值。</p><div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#00a8c8>struct</span> <span style=color:#75af00>node</span>
</span></span><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>long</span> <span style=color:#00a8c8>long</span> <span style=color:#111>sum</span><span style=color:#111>,</span> <span style=color:#111>add</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#ae81ff>4</span> <span style=color:#f92672>*</span> <span style=color:#111>MAXN</span><span style=color:#111>];</span>
</span></span></code></pre></td></tr></table></div></div><p>下放操作：</p><div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>pushdown</span><span style=color:#111>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>cur</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>left</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>mid</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>right</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 将当前结点的 add 值下放给子结点
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#00a8c8>const</span> <span style=color:#00a8c8>int</span> <span style=color:#111>leftSon</span> <span style=color:#f92672>=</span> <span style=color:#111>cur</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span><span style=color:#111>,</span> <span style=color:#111>rightSon</span> <span style=color:#f92672>=</span> <span style=color:#111>leftSon</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 更新总和（区间元素个数*每个元素要增加的值）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>leftSon</span><span style=color:#111>].</span><span style=color:#111>sum</span> <span style=color:#f92672>+=</span> <span style=color:#111>(</span><span style=color:#111>mid</span> <span style=color:#f92672>-</span> <span style=color:#111>left</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>)</span> <span style=color:#f92672>*</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>add</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>rightSon</span><span style=color:#111>].</span><span style=color:#111>sum</span> <span style=color:#f92672>+=</span> <span style=color:#111>(</span><span style=color:#111>right</span> <span style=color:#f92672>-</span> <span style=color:#111>mid</span><span style=color:#111>)</span> <span style=color:#f92672>*</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>add</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 更新 add 值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>leftSon</span><span style=color:#111>].</span><span style=color:#111>add</span> <span style=color:#f92672>+=</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>add</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>rightSon</span><span style=color:#111>].</span><span style=color:#111>add</span> <span style=color:#f92672>+=</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>add</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 当前结点的懒惰标记已经下放，需要清零
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>add</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></td></tr></table></div></div><p>区间增加一个值：</p><div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>update</span><span style=color:#111>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>cur</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>left</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>right</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#111>,</span> <span style=color:#111>ll</span> <span style=color:#111>c</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>left</span> <span style=color:#f92672>&gt;</span> <span style=color:#111>y</span> <span style=color:#f92672>||</span> <span style=color:#111>right</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>x</span><span style=color:#111>)</span>      <span style=color:#75715e>// 相离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>return</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>left</span> <span style=color:#f92672>&gt;=</span> <span style=color:#111>x</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#111>right</span> <span style=color:#f92672>&lt;=</span> <span style=color:#111>y</span><span style=color:#111>)</span>   <span style=color:#75715e>// 完全包含 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 给当前区间整体增加 c
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>sum</span> <span style=color:#f92672>+=</span> <span style=color:#111>(</span><span style=color:#111>right</span> <span style=color:#f92672>-</span> <span style=color:#111>left</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>)</span> <span style=color:#f92672>*</span> <span style=color:#111>c</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 打标记
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>add</span> <span style=color:#f92672>+=</span> <span style=color:#111>c</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 这时不需要子结点的值，所以不必下放
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>return</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 相交
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 分成两个子区间，必须要往下走了
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#00a8c8>int</span> <span style=color:#111>mid</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#111>left</span> <span style=color:#f92672>+</span> <span style=color:#111>right</span><span style=color:#111>)</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>int</span> <span style=color:#111>leftSon</span> <span style=color:#f92672>=</span> <span style=color:#111>cur</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span><span style=color:#111>,</span> <span style=color:#111>rightSon</span> <span style=color:#f92672>=</span> <span style=color:#111>leftSon</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#111>pushdown</span><span style=color:#111>(</span><span style=color:#111>cur</span><span style=color:#111>,</span> <span style=color:#111>left</span><span style=color:#111>,</span> <span style=color:#111>mid</span><span style=color:#111>,</span> <span style=color:#111>right</span><span style=color:#111>);</span>                <span style=color:#75715e>// 先下放标记
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#111>update</span><span style=color:#111>(</span><span style=color:#111>leftSon</span><span style=color:#111>,</span> <span style=color:#111>left</span><span style=color:#111>,</span> <span style=color:#111>mid</span><span style=color:#111>,</span> <span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#111>,</span> <span style=color:#111>c</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>    <span style=color:#111>update</span><span style=color:#111>(</span><span style=color:#111>rightSon</span><span style=color:#111>,</span> <span style=color:#111>mid</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>right</span><span style=color:#111>,</span> <span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#111>,</span> <span style=color:#111>c</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>    <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>sum</span> <span style=color:#f92672>=</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>sum</span> <span style=color:#f92672>+</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#111>cur</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>].</span><span style=color:#111>sum</span><span style=color:#111>;</span>  <span style=color:#75715e>// 最后汇总总和
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#111>}</span>
</span></span></code></pre></td></tr></table></div></div><p>区间查询：</p><div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#111>ll</span> <span style=color:#75af00>query</span><span style=color:#111>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>cur</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>left</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>right</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>y</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>left</span> <span style=color:#f92672>&gt;</span> <span style=color:#111>y</span> <span style=color:#f92672>||</span> <span style=color:#111>right</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>x</span><span style=color:#111>)</span>   <span style=color:#75715e>// 相离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>return</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>left</span> <span style=color:#f92672>&gt;=</span> <span style=color:#111>x</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#111>right</span> <span style=color:#f92672>&lt;=</span> <span style=color:#111>y</span><span style=color:#111>)</span> <span style=color:#75715e>// 完全包含
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#00a8c8>return</span> <span style=color:#111>tree</span><span style=color:#111>[</span><span style=color:#111>cur</span><span style=color:#111>].</span><span style=color:#111>sum</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 相交
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 拆成两个字区间再求和
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#00a8c8>int</span> <span style=color:#111>mid</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#111>left</span> <span style=color:#f92672>+</span> <span style=color:#111>right</span><span style=color:#111>)</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>int</span> <span style=color:#111>leftSon</span> <span style=color:#f92672>=</span> <span style=color:#111>cur</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span><span style=color:#111>,</span> <span style=color:#111>rightSon</span> <span style=color:#f92672>=</span> <span style=color:#111>leftSon</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#111>pushdown</span><span style=color:#111>(</span><span style=color:#111>cur</span><span style=color:#111>,</span> <span style=color:#111>left</span><span style=color:#111>,</span> <span style=color:#111>mid</span><span style=color:#111>,</span> <span style=color:#111>right</span><span style=color:#111>);</span>    <span style=color:#75715e>// 必须往下走，下放标记
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#00a8c8>return</span> <span style=color:#111>query</span><span style=color:#111>(</span><span style=color:#111>leftSon</span><span style=color:#111>,</span> <span style=color:#111>left</span><span style=color:#111>,</span> <span style=color:#111>mid</span><span style=color:#111>,</span> <span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#111>)</span> <span style=color:#f92672>+</span> <span style=color:#111>query</span><span style=color:#111>(</span><span style=color:#111>rightSon</span><span style=color:#111>,</span> <span style=color:#111>mid</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>right</span><span style=color:#111>,</span> <span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></td></tr></table></div></div><p>通过上面的代码，我们可以看到：懒惰标记就是为了不往下走，尽量在更大的区间做一次操作。必要时才往下下放标记。它不会主动做事，而是到你需要的时候才花时间去做。通过这样节省了很多时间。</p><h2 id=小结><a href=#%e5%b0%8f%e7%bb%93 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>小结</h2><p>总的来说，线段树不是一个很难的数据结构，但是很实用。</p><p>感谢 lgj 老师！</p></div><div class=paginav><a rel=prev href=/articles/hello-hugo/ title="Previous post (older)"><span>Prev</span><div class=paginav-title>Hello Hugo!</div></a><a class=text-right rel=next href=/articles/csp2021/ title="Next post (newer)"><span>Next</span><div class=paginav-title>CSP-J 2021 游记</div></a></div></div><div class=container><script src=https://giscus.app/client.js data-repo=ChungZH/ChungZH.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNzcxMjMzNjI=" data-category=Comments data-category-id=DIC_kwDOCo6wIs4B_i5g data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-theme=light crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector(".giscus iframe");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}const colorSchemeQueryList=window.matchMedia("(prefers-color-scheme: dark)"),setColorScheme=e=>{setGiscusTheme(e.matches?"dark_dimmed":"light")};setColorScheme(colorSchemeQueryList),colorSchemeQueryList.addEventListener("change",setColorScheme)</script></div></main><footer class="text-sm leading-6 mt-10"><div class="pt-10 pb-28 border-t border-slate-200 sm:flex justify-between text-slate-500 dark:border-slate-200/5"><div class="mb-6 sm:mb-0 sm:flex"><p>Made with ❤</p><p class="sm:ml-4 sm:pl-4 sm:border-l sm:border-slate-200 dark:sm:border-slate-200/5">By
<a class="hover:text-slate-900 dark:hover:text-slate-400" href=https://github.com/ChungZH>ChungZH</a></p><p class="sm:ml-4 sm:pl-4 sm:border-l sm:border-slate-200 dark:sm:border-slate-200/5">Theme hugo-klay</p></div></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css integrity=sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js integrity=sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous onload='renderMathInElement(document.querySelector(".article-post"),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})'></script></footer></div></body></html>