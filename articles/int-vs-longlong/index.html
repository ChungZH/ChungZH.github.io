<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>关于 int 与 long long 的运算速度 | ChungZH's Blog</title><meta property="og:site_name" content="ChungZH's Blog"><meta property="og:title" content="关于 int 与 long long 的运算速度 | ChungZH's Blog"><meta itemprop=name content="关于 int 与 long long 的运算速度 | ChungZH's Blog"><meta name=twitter:title content="关于 int 与 long long 的运算速度 | ChungZH's Blog"><meta name=application-name content="关于 int 与 long long 的运算速度 | ChungZH's Blog"><link rel="shortcut icon" href=/BlogFavicon16.png><meta name=twitter:card content="summary"><meta name=description content="Welcome to my blog!"><meta name=twitter:description content="Welcome to my blog!"><meta itemprop=description content="Welcome to my blog!"><meta property="og:description" content="Welcome to my blog!"><link rel=stylesheet href="https://blog.chungzh.cn/sass/main.min.2f68c918ed7ceda422e5625841a25f023990d420145b14c62bf037e20ccdc391.css" integrity="sha256-L2jJGO187aQi5WJYQaJfAjmQ1CAUWxTGK/A34gzNw5E="></head><body class="bg-white dark:bg-slate-900 text-slate-500 dark:text-slate-400"><header class="sticky top-0 z-40"><div class="w-full backdrop-blur bg-white/80 dark:bg-slate-900/75 lg:border-b lg:border-slate-900/10 dark:border-slate-50/[0.06]"><div class="py-4 border-b border-slate-900/10 lg:px-8 lg:border-0 dark:border-slate-300/10 mx-4 lg:mx-0"><div class="px-20 relative flex flex-wrap justify-between"><div class="relative flex items-center"><a href=/><div class="flex gap-3 items-center text-xl font-bold text-slate-800 dark:text-slate-200"><img class="w-auto h-8" src=/BlogFavicon16.png title=logo>
<span class="hover:text-sky-500 dark:hover:text-sky-400">ChungZH's Blog</span></div></a></div><div class="relative flex items-center"><div class="flex gap-5 items-center leading-6 font-semibold text-slate-700 dark:text-slate-200"><a class="hover:text-sky-500 dark:hover:text-sky-400" href=/about/>关于</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/friends/>友链</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/archives/>存档</a>
<a class="hover:text-sky-500 dark:hover:text-sky-400" href=/tags/>标签</a></div></div></div></div></div></header><div class="max-w-3xl mx-auto pb-28"><main class="max-w-[52rem] mx-auto py-10"><div class=container><article><header class=article-header><div class=thumb><div><div class=post-tags><a class=tag href=/tags/c++/>#C++</a>
<a class=tag href=/tags/oi/>#OI</a></div><h1 class=post-title>关于 int 与 long long 的运算速度</h1><div class=post-meta>By ChungZH<div class="font-bold text-sky-500 dark:text-sky-400">·</div><time>July 22, 2022</time><div class="font-bold text-sky-500 dark:text-sky-400">·</div>3 minutes</div></div></div></header></article><aside class=toc><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#不严谨测试>不严谨测试</a><ul><li><a href=#测试环境>测试环境</a></li><li><a href=#代码>代码</a></li><li><a href=#结果>结果</a></li></ul></li><li><a href=#stackoverflow-问答>StackOverflow 问答</a></li><li><a href=#结论>结论</a></li></ul></nav></aside><div class=article-post><h2 id=前言><a href=#%e5%89%8d%e8%a8%80 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>前言</h2><p>写一道 CF 题的时候，算法明明是正确的，却一直都 TLE。最后把一个 <code>long long</code> 类型的数组改成了 <code>int</code>，竟然就 AC 了。。</p><p>这不禁引发了我的思考，<code>int</code> 与 <code>long long</code> 的运算速度不一样吗？</p><h2 id=不严谨测试><a href=#%e4%b8%8d%e4%b8%a5%e8%b0%a8%e6%b5%8b%e8%af%95 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>不严谨测试</h2><p>由于本菜鸡并没有什么计算机基础原理的知识，只好做了一个测试。当然，这个测试其实很不严谨，没有很大的参考价值。<del>我也就图一乐，哈哈哈哈哈</del></p><h3 id=测试环境><a href=#%e6%b5%8b%e8%af%95%e7%8e%af%e5%a2%83 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>测试环境</h3><ul><li>电脑：Lenovo Yoga 14sACH 2021</li><li>系统：Windows 11 25163.1010</li><li>CPU：AMD Ryzen 7 5800H with Radeon Graphics (16) @ 3.200GHz</li><li>RAM：16.0 GB</li><li>编译器：GCC 11.2.0</li></ul><h3 id=代码><a href=#%e4%bb%a3%e7%a0%81 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>代码</h3><p><del>仅仅是为了图一乐，</del> 我第一次使用了 <a href=https://github.com/google/benchmark/>Google Benchmark</a> 这一工具。其实挺好上手的。</p><div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;benchmark/benchmark.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>using</span> <span style=color:#00a8c8>namespace</span> <span style=color:#111>benchmark</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>int_add</span><span style=color:#111>(</span><span style=color:#111>State</span> <span style=color:#f92672>&amp;</span><span style=color:#111>state</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>int</span> <span style=color:#111>a</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>b</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>for</span> <span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>_</span> <span style=color:#111>:</span> <span style=color:#111>state</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>DoNotOptimize</span><span style=color:#111>(</span><span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>a</span><span style=color:#111>)</span> <span style=color:#f92672>+</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>b</span><span style=color:#111>));</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>ll_add</span><span style=color:#111>(</span><span style=color:#111>State</span> <span style=color:#f92672>&amp;</span><span style=color:#111>state</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>long</span> <span style=color:#00a8c8>long</span> <span style=color:#111>a</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>b</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>for</span> <span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>_</span> <span style=color:#111>:</span> <span style=color:#111>state</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>DoNotOptimize</span><span style=color:#111>(</span><span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>a</span><span style=color:#111>)</span> <span style=color:#f92672>+</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>b</span><span style=color:#111>));</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>int_div</span><span style=color:#111>(</span><span style=color:#111>State</span> <span style=color:#f92672>&amp;</span><span style=color:#111>state</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>int</span> <span style=color:#111>a</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>b</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>for</span> <span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>_</span> <span style=color:#111>:</span> <span style=color:#111>state</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>DoNotOptimize</span><span style=color:#111>(</span><span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>a</span><span style=color:#111>)</span> <span style=color:#f92672>/</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>b</span><span style=color:#111>));</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>ll_div</span><span style=color:#111>(</span><span style=color:#111>State</span> <span style=color:#f92672>&amp;</span><span style=color:#111>state</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>long</span> <span style=color:#00a8c8>long</span> <span style=color:#111>a</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>b</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>for</span> <span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>_</span> <span style=color:#111>:</span> <span style=color:#111>state</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>DoNotOptimize</span><span style=color:#111>(</span><span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>a</span><span style=color:#111>)</span> <span style=color:#f92672>/</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>b</span><span style=color:#111>));</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>int_mod</span><span style=color:#111>(</span><span style=color:#111>State</span> <span style=color:#f92672>&amp;</span><span style=color:#111>state</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>int</span> <span style=color:#111>a</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>b</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>for</span> <span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>_</span> <span style=color:#111>:</span> <span style=color:#111>state</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>DoNotOptimize</span><span style=color:#111>(</span><span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>a</span><span style=color:#111>)</span> <span style=color:#f92672>%</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>b</span><span style=color:#111>));</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>static</span> <span style=color:#00a8c8>void</span> <span style=color:#75af00>ll_mod</span><span style=color:#111>(</span><span style=color:#111>State</span> <span style=color:#f92672>&amp;</span><span style=color:#111>state</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>long</span> <span style=color:#00a8c8>long</span> <span style=color:#111>a</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>b</span> <span style=color:#f92672>=</span> <span style=color:#111>std</span><span style=color:#f92672>::</span><span style=color:#111>rand</span><span style=color:#111>(),</span> <span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>for</span> <span style=color:#111>(</span><span style=color:#00a8c8>auto</span> <span style=color:#111>_</span> <span style=color:#111>:</span> <span style=color:#111>state</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>DoNotOptimize</span><span style=color:#111>(</span><span style=color:#111>c</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>a</span><span style=color:#111>)</span> <span style=color:#f92672>%</span> <span style=color:#111>(</span><span style=color:#f92672>++</span><span style=color:#111>b</span><span style=color:#111>));</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>BENCHMARK</span><span style=color:#111>(</span><span style=color:#111>int_add</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Threads</span><span style=color:#111>(</span><span style=color:#ae81ff>8</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Iterations</span><span style=color:#111>(</span><span style=color:#ae81ff>1e9</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span><span style=color:#111>BENCHMARK</span><span style=color:#111>(</span><span style=color:#111>ll_add</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Threads</span><span style=color:#111>(</span><span style=color:#ae81ff>8</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Iterations</span><span style=color:#111>(</span><span style=color:#ae81ff>1e9</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span><span style=color:#111>BENCHMARK</span><span style=color:#111>(</span><span style=color:#111>int_div</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Threads</span><span style=color:#111>(</span><span style=color:#ae81ff>8</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Iterations</span><span style=color:#111>(</span><span style=color:#ae81ff>1e9</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span><span style=color:#111>BENCHMARK</span><span style=color:#111>(</span><span style=color:#111>ll_div</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Threads</span><span style=color:#111>(</span><span style=color:#ae81ff>8</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Iterations</span><span style=color:#111>(</span><span style=color:#ae81ff>1e9</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span><span style=color:#111>BENCHMARK</span><span style=color:#111>(</span><span style=color:#111>int_mod</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Threads</span><span style=color:#111>(</span><span style=color:#ae81ff>8</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Iterations</span><span style=color:#111>(</span><span style=color:#ae81ff>1e9</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span><span style=color:#111>BENCHMARK</span><span style=color:#111>(</span><span style=color:#111>ll_mod</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Threads</span><span style=color:#111>(</span><span style=color:#ae81ff>8</span><span style=color:#111>)</span><span style=color:#f92672>-&gt;</span><span style=color:#111>Iterations</span><span style=color:#111>(</span><span style=color:#ae81ff>1e9</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>BENCHMARK_MAIN</span><span style=color:#111>();</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=结果><a href=#%e7%bb%93%e6%9e%9c class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>结果</h3><div class=highlight><div style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#111>---------------------------------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#111>Benchmark</span>                                        <span style=color:#111>Time</span>             <span style=color:#111>CPU</span> 
</span></span><span style=display:flex><span><span style=color:#111>---------------------------------------------------------------------</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>int_add</span><span style=color:#111>/</span><span style=color:#111>iterations</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>1000000000</span><span style=color:#111>/</span><span style=color:#111>threads</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>8</span>      <span style=color:#111>0</span><span style=color:#111>.</span><span style=color:#111>209</span> <span style=color:#111>ns</span>         <span style=color:#111>1</span><span style=color:#111>.</span><span style=color:#111>57</span> <span style=color:#111>ns</span>
</span></span><span style=display:flex><span><span style=color:#111>ll_add</span><span style=color:#111>/</span><span style=color:#111>iterations</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>1000000000</span><span style=color:#111>/</span><span style=color:#111>threads</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>8</span>       <span style=color:#111>0</span><span style=color:#111>.</span><span style=color:#111>225</span> <span style=color:#111>ns</span>         <span style=color:#111>1</span><span style=color:#111>.</span><span style=color:#111>71</span> <span style=color:#111>ns</span>
</span></span><span style=display:flex><span><span style=color:#111>int_div</span><span style=color:#111>/</span><span style=color:#111>iterations</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>1000000000</span><span style=color:#111>/</span><span style=color:#111>threads</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>8</span>      <span style=color:#111>0</span><span style=color:#111>.</span><span style=color:#111>302</span> <span style=color:#111>ns</span>         <span style=color:#111>2</span><span style=color:#111>.</span><span style=color:#111>29</span> <span style=color:#111>ns</span>
</span></span><span style=display:flex><span><span style=color:#111>ll_div</span><span style=color:#111>/</span><span style=color:#111>iterations</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>1000000000</span><span style=color:#111>/</span><span style=color:#111>threads</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>8</span>       <span style=color:#111>0</span><span style=color:#111>.</span><span style=color:#111>306</span> <span style=color:#111>ns</span>         <span style=color:#111>2</span><span style=color:#111>.</span><span style=color:#111>38</span> <span style=color:#111>ns</span>
</span></span><span style=display:flex><span><span style=color:#111>int_mod</span><span style=color:#111>/</span><span style=color:#111>iterations</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>1000000000</span><span style=color:#111>/</span><span style=color:#111>threads</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>8</span>      <span style=color:#111>0</span><span style=color:#111>.</span><span style=color:#111>345</span> <span style=color:#111>ns</span>         <span style=color:#111>2</span><span style=color:#111>.</span><span style=color:#111>18</span> <span style=color:#111>ns</span>
</span></span><span style=display:flex><span><span style=color:#111>ll_mod</span><span style=color:#111>/</span><span style=color:#111>iterations</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>1000000000</span><span style=color:#111>/</span><span style=color:#111>threads</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>8</span>       <span style=color:#111>0</span><span style=color:#111>.</span><span style=color:#111>350</span> <span style=color:#111>ns</span>         <span style=color:#111>2</span><span style=color:#111>.</span><span style=color:#111>34</span> <span style=color:#111>ns</span>
</span></span></code></pre></td></tr></table></div></div><p>经过多次测试，<code>long long</code> 类型的各种运算都比 <code>int</code> 慢一点。</p><h2 id=stackoverflow-问答><a href=#stackoverflow-%e9%97%ae%e7%ad%94 class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>StackOverflow 问答</h2><p>比较专业的一个解答。详见 <a href=https://stackoverflow.com/questions/39779880/c-int-vs-long-long-in-64-bit-machine>performance - C++ int vs long long in 64 bit machine - Stack Overflow</a>。</p><p>这里引用相关问答：</p><blockquote><p><em>1) If it is best practice to use long long in x64 for achieving maximum performance even for for 1-4 byte data?</em></p><p>No- and it will probably in fact make your performance worse. For example, if you use 64-bit integers where you could have gotten away with 32-bit integers then you have just doubled the amount of data that must be sent between the processor and memory and the memory is orders of magnitude slower. All of your caches and memory buses will crap out twice as fast.</p></blockquote><h2 id=结论><a href=#%e7%bb%93%e8%ae%ba class=anchor><svg class="icon" aria-hidden="true" focusable="false" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>结论</h2><p>可以不用 <code>long long</code> 就尽量不用。最好不要使用 <code>#define int long long</code> 这种粗暴手段。</p><hr><p><strong>致谢</strong>：</p><ul><li><a href=https://unum.cloud/post/2022-03-04-gbench/>C++ Benchmarking Tips for Beginners - Unum Blog</a></li></ul><blockquote><p>碎碎念：真的有大半年没写过博客了，上次更新还是寒假呢哈哈哈。一整个学期都好忙啊，接下来就是初三了呢。</p></blockquote><p>🙇</p></div><div class=paginav><a rel=prev href=/articles/treap/ title="Previous post (older)"><span>Prev</span><div class=paginav-title>Treap 学习笔记</div></a><a class=text-right rel=next href=/articles/hugo-klay/ title="Next post (newer)"><span>Next</span><div class=paginav-title>第一次做主题：hugo-klay</div></a></div></div><div class=container><script src=https://giscus.app/client.js data-repo=ChungZH/ChungZH.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNzcxMjMzNjI=" data-category=Comments data-category-id=DIC_kwDOCo6wIs4B_i5g data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-theme=light crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector(".giscus iframe");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}const colorSchemeQueryList=window.matchMedia("(prefers-color-scheme: dark)"),setColorScheme=e=>{setGiscusTheme(e.matches?"dark_dimmed":"light")};setColorScheme(colorSchemeQueryList),colorSchemeQueryList.addEventListener("change",setColorScheme)</script></div></main><footer class="text-sm leading-6 mt-10"><div class="pt-10 pb-28 border-t border-slate-200 sm:flex justify-between text-slate-500 dark:border-slate-200/5"><div class="mb-6 sm:mb-0 sm:flex"><p>Made with ❤</p><p class="sm:ml-4 sm:pl-4 sm:border-l sm:border-slate-200 dark:sm:border-slate-200/5">By
<a class="hover:text-slate-900 dark:hover:text-slate-400" href=https://github.com/ChungZH>ChungZH</a></p><p class="sm:ml-4 sm:pl-4 sm:border-l sm:border-slate-200 dark:sm:border-slate-200/5">Theme hugo-klay</p></div></div></footer></div></body></html>