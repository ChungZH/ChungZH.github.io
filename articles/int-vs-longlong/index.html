<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=theme-color content="dark"><title>关于 int 与 long long 的运算速度 | ChungZH's Blog</title><meta property="og:site_name" content="ChungZH's Blog"><meta property="og:title" content="关于 int 与 long long 的运算速度 | ChungZH's Blog"><meta itemprop=name content="关于 int 与 long long 的运算速度 | ChungZH's Blog"><meta name=twitter:title content="关于 int 与 long long 的运算速度 | ChungZH's Blog"><meta name=application-name content="关于 int 与 long long 的运算速度 | ChungZH's Blog"><meta name=twitter:card content="summary"><meta name=description content="Welcome to my blog!"><meta name=twitter:description content="Welcome to my blog!"><meta itemprop=description content="Welcome to my blog!"><meta property="og:description" content="Welcome to my blog!"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=stylesheet href=/sass/main.min.ab99ff095f832511e24ffb2fba2b51ad473b2f7e9301d674eba2c6c3a6e8bd81.css><style>:root{--base-font-family:"Noto Serif SC", var(--sys-font-family), var(--zh-font-family)}</style><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></head><script>(function(){const e="ThemeColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="ThemeColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.userColorScheme="dark":document.documentElement.dataset.userColorScheme="light"})()</script><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/><span class=emoji>🎆</span>
<img src=/BlogFavicon16.png>
ChungZH's Blog</a></div><div class=flex><a href=/about/>关于</a>
<a href=/friends/>友链</a>
<a href=/articles/>文章</a>
<a href=/tags/>标签</a>
<button id=dark-mode-button><svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163.0 101.643 1.641 1.163 1.163.0 00-1.643-1.641zm-16.022 14.38a1.74 1.74.0 000 2.465 1.742 1.742.0 100-2.465zm13.968-2.147a2.904 2.904.0 01-4.108.0 2.902 2.902.0 010-4.107 2.902 2.902.0 014.108.0 2.902 2.902.0 010 4.107z" fill="#ffcc4d"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg><svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M16 2s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2V2zm18 14s2 0 2 2-2 2-2 2h-2s-2 0-2-2 2-2 2-2h2zM4 16s2 0 2 2-2 2-2 2H2s-2 0-2-2 2-2 2-2h2zm5.121-8.707s1.414 1.414.0 2.828-2.828.0-2.828.0L4.878 8.708s-1.414-1.414.0-2.829c1.415-1.414 2.829.0 2.829.0l1.414 1.414zm21 21s1.414 1.414.0 2.828-2.828.0-2.828.0l-1.414-1.414s-1.414-1.414.0-2.828 2.828.0 2.828.0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zM16 32s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2v-2z"/><circle fill="#ffd983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg></button></div></div></div></nav><main><div class=container><article><header class=article-header><div class=thumb><div><h1>关于 int 与 long long 的运算速度</h1><div class=post-meta><div>By ChungZH | <time>July 22, 2022</time>
| 3 minutes</div><div class=tags><a href=/tags/c++/>C++</a>
<a href=/tags/oi/>OI</a></div></div></div></div></header></article><div class=article-post><h2 id=前言><a href=#%e5%89%8d%e8%a8%80 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>前言</h2><p>写一道 CF 题的时候，算法明明是正确的，却一直都 TLE。最后把一个 <code>long long</code> 类型的数组改成了 <code>int</code>，竟然就 AC 了。。</p><p>这不禁引发了我的思考，<code>int</code> 与 <code>long long</code> 的运算速度不一样吗？</p><h2 id=不严谨测试><a href=#%e4%b8%8d%e4%b8%a5%e8%b0%a8%e6%b5%8b%e8%af%95 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>不严谨测试</h2><p>由于本菜鸡并没有什么计算机基础原理的知识，只好做了一个测试。当然，这个测试其实很不严谨，没有很大的参考价值。<del>我也就图一乐，哈哈哈哈哈</del></p><h3 id=测试环境><a href=#%e6%b5%8b%e8%af%95%e7%8e%af%e5%a2%83 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>测试环境</h3><ul><li>电脑：Lenovo Yoga 14sACH 2021</li><li>系统：Windows 11 25163.1010</li><li>CPU：AMD Ryzen 7 5800H with Radeon Graphics (16) @ 3.200GHz</li><li>RAM：16.0 GB</li><li>编译器：GCC 11.2.0</li></ul><h3 id=代码><a href=#%e4%bb%a3%e7%a0%81 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>代码</h3><p><del>仅仅是为了图一乐，</del> 我第一次使用了 <a href=https://github.com/google/benchmark/>Google Benchmark</a> 这一工具。其实挺好上手的。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;benchmark/benchmark.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=k>namespace</span> <span class=n>benchmark</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>void</span> <span class=nf>int_add</span><span class=p>(</span><span class=n>State</span> <span class=o>&amp;</span><span class=n>state</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>b</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>_</span> <span class=p>:</span> <span class=n>state</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>DoNotOptimize</span><span class=p>(</span><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=o>++</span><span class=n>a</span><span class=p>)</span> <span class=o>+</span> <span class=p>(</span><span class=o>++</span><span class=n>b</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>void</span> <span class=nf>ll_add</span><span class=p>(</span><span class=n>State</span> <span class=o>&amp;</span><span class=n>state</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>long</span> <span class=kt>long</span> <span class=n>a</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>b</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>_</span> <span class=p>:</span> <span class=n>state</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>DoNotOptimize</span><span class=p>(</span><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=o>++</span><span class=n>a</span><span class=p>)</span> <span class=o>+</span> <span class=p>(</span><span class=o>++</span><span class=n>b</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>void</span> <span class=nf>int_div</span><span class=p>(</span><span class=n>State</span> <span class=o>&amp;</span><span class=n>state</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>b</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>_</span> <span class=p>:</span> <span class=n>state</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>DoNotOptimize</span><span class=p>(</span><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=o>++</span><span class=n>a</span><span class=p>)</span> <span class=o>/</span> <span class=p>(</span><span class=o>++</span><span class=n>b</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>void</span> <span class=nf>ll_div</span><span class=p>(</span><span class=n>State</span> <span class=o>&amp;</span><span class=n>state</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>long</span> <span class=kt>long</span> <span class=n>a</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>b</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>_</span> <span class=p>:</span> <span class=n>state</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>DoNotOptimize</span><span class=p>(</span><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=o>++</span><span class=n>a</span><span class=p>)</span> <span class=o>/</span> <span class=p>(</span><span class=o>++</span><span class=n>b</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>void</span> <span class=nf>int_mod</span><span class=p>(</span><span class=n>State</span> <span class=o>&amp;</span><span class=n>state</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>b</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>_</span> <span class=p>:</span> <span class=n>state</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>DoNotOptimize</span><span class=p>(</span><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=o>++</span><span class=n>a</span><span class=p>)</span> <span class=o>%</span> <span class=p>(</span><span class=o>++</span><span class=n>b</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>void</span> <span class=nf>ll_mod</span><span class=p>(</span><span class=n>State</span> <span class=o>&amp;</span><span class=n>state</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>long</span> <span class=kt>long</span> <span class=n>a</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>b</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>rand</span><span class=p>(),</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>_</span> <span class=p>:</span> <span class=n>state</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>DoNotOptimize</span><span class=p>(</span><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=o>++</span><span class=n>a</span><span class=p>)</span> <span class=o>%</span> <span class=p>(</span><span class=o>++</span><span class=n>b</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>BENCHMARK</span><span class=p>(</span><span class=n>int_add</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Threads</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Iterations</span><span class=p>(</span><span class=mf>1e9</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>BENCHMARK</span><span class=p>(</span><span class=n>ll_add</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Threads</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Iterations</span><span class=p>(</span><span class=mf>1e9</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>BENCHMARK</span><span class=p>(</span><span class=n>int_div</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Threads</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Iterations</span><span class=p>(</span><span class=mf>1e9</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>BENCHMARK</span><span class=p>(</span><span class=n>ll_div</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Threads</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Iterations</span><span class=p>(</span><span class=mf>1e9</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>BENCHMARK</span><span class=p>(</span><span class=n>int_mod</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Threads</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Iterations</span><span class=p>(</span><span class=mf>1e9</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>BENCHMARK</span><span class=p>(</span><span class=n>ll_mod</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Threads</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>Iterations</span><span class=p>(</span><span class=mf>1e9</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>BENCHMARK_MAIN</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=结果><a href=#%e7%bb%93%e6%9e%9c class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>结果</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>---------------------------------------------------------------------</span>
</span></span><span class=line><span class=cl><span class=n>Benchmark</span>                                        <span class=n>Time</span>             <span class=n>CPU</span> 
</span></span><span class=line><span class=cl><span class=p>---------------------------------------------------------------------</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>int_add</span><span class=p>/</span><span class=n>iterations</span><span class=err>:</span><span class=n>1000000000</span><span class=p>/</span><span class=n>threads</span><span class=err>:</span><span class=n>8</span>      <span class=n>0</span><span class=p>.</span><span class=n>209</span> <span class=n>ns</span>         <span class=n>1</span><span class=p>.</span><span class=n>57</span> <span class=n>ns</span>
</span></span><span class=line><span class=cl><span class=n>ll_add</span><span class=p>/</span><span class=n>iterations</span><span class=err>:</span><span class=n>1000000000</span><span class=p>/</span><span class=n>threads</span><span class=err>:</span><span class=n>8</span>       <span class=n>0</span><span class=p>.</span><span class=n>225</span> <span class=n>ns</span>         <span class=n>1</span><span class=p>.</span><span class=n>71</span> <span class=n>ns</span>
</span></span><span class=line><span class=cl><span class=n>int_div</span><span class=p>/</span><span class=n>iterations</span><span class=err>:</span><span class=n>1000000000</span><span class=p>/</span><span class=n>threads</span><span class=err>:</span><span class=n>8</span>      <span class=n>0</span><span class=p>.</span><span class=n>302</span> <span class=n>ns</span>         <span class=n>2</span><span class=p>.</span><span class=n>29</span> <span class=n>ns</span>
</span></span><span class=line><span class=cl><span class=n>ll_div</span><span class=p>/</span><span class=n>iterations</span><span class=err>:</span><span class=n>1000000000</span><span class=p>/</span><span class=n>threads</span><span class=err>:</span><span class=n>8</span>       <span class=n>0</span><span class=p>.</span><span class=n>306</span> <span class=n>ns</span>         <span class=n>2</span><span class=p>.</span><span class=n>38</span> <span class=n>ns</span>
</span></span><span class=line><span class=cl><span class=n>int_mod</span><span class=p>/</span><span class=n>iterations</span><span class=err>:</span><span class=n>1000000000</span><span class=p>/</span><span class=n>threads</span><span class=err>:</span><span class=n>8</span>      <span class=n>0</span><span class=p>.</span><span class=n>345</span> <span class=n>ns</span>         <span class=n>2</span><span class=p>.</span><span class=n>18</span> <span class=n>ns</span>
</span></span><span class=line><span class=cl><span class=n>ll_mod</span><span class=p>/</span><span class=n>iterations</span><span class=err>:</span><span class=n>1000000000</span><span class=p>/</span><span class=n>threads</span><span class=err>:</span><span class=n>8</span>       <span class=n>0</span><span class=p>.</span><span class=n>350</span> <span class=n>ns</span>         <span class=n>2</span><span class=p>.</span><span class=n>34</span> <span class=n>ns</span>
</span></span></code></pre></td></tr></table></div></div><p>经过多次测试，<code>long long</code> 类型的各种运算都比 <code>int</code> 慢一点。</p><h2 id=stackoverflow-问答><a href=#stackoverflow-%e9%97%ae%e7%ad%94 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>StackOverflow 问答</h2><p>比较专业的一个解答。详见 <a href=https://stackoverflow.com/questions/39779880/c-int-vs-long-long-in-64-bit-machine>performance - C++ int vs long long in 64 bit machine - Stack Overflow</a>。</p><p>这里引用相关问答：</p><blockquote><p><em>1) If it is best practice to use long long in x64 for achieving maximum performance even for for 1-4 byte data?</em></p><p>No- and it will probably in fact make your performance worse. For example, if you use 64-bit integers where you could have gotten away with 32-bit integers then you have just doubled the amount of data that must be sent between the processor and memory and the memory is orders of magnitude slower. All of your caches and memory buses will crap out twice as fast.</p></blockquote><h2 id=结论><a href=#%e7%bb%93%e8%ae%ba class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>结论</h2><p>可以不用 <code>long long</code> 就尽量不用。最好不要使用 <code>#define int long long</code> 这种粗暴手段。</p><hr><p><strong>致谢</strong>：</p><ul><li><a href=https://unum.cloud/post/2022-03-04-gbench/>C++ Benchmarking Tips for Beginners - Unum Blog</a></li></ul><blockquote><p>碎碎念：真的有大半年没写过博客了，上次更新还是寒假呢哈哈哈。一整个学期都好忙啊，接下来就是初三了呢。</p></blockquote><p>🙇</p></div></div><div class=container><nav class="flex container suggested"><a rel=prev href=/articles/treap/ title="Previous post (older)"><span>Previous</span>
Treap 学习笔记</a></nav></div><div class=container><script src=https://giscus.app/client.js data-repo=ChungZH/ChungZH.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNzcxMjMzNjI=" data-category=Comments data-category-id=DIC_kwDOCo6wIs4B_i5g data-mapping=title data-reactions-enabled=1 data-emit-metadata=0 data-theme=light crossorigin=anonymous async></script><script>function setGiscusTeheme(e){let t=document.querySelector(".giscus iframe");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}addEventListener("message",e=>{if(e.origin!=="https://giscus.app")return;setGiscusTeheme(document.documentElement.dataset.userColorScheme)}),window.addEventListener("onColorSchemeChange",e=>{setGiscusTeheme(e.detail)})</script></div></main></main><footer class="footer flex"><section class=container><nav class=footer-links><a href=https://creativecommons.org/licenses/by-nc-sa/2.5/cn/>CC BY-NC-SA 2.5</a>
<a href=/index.xml>RSS</a></nav></section><script defer src=/ts/features.dd8e5b18a6dda91367e396fd8dc9b9f83a1993065f709a53e056e0f2e9096ea1.js data-enable-footnotes=true></script></footer></body></html>